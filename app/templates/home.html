{% extends "base.html" %}

{% block title %}Home{% endblock %}

{% block content %}

<!DOCTYPE html>
<html lang="en">

<head>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/home.css') }}">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Money Map - Home</title>
</head>

<body>
    <div class="main-content">
        <div class="total-balance">
            <h2>Total Balance</h2>
            <div class="amount" data-raw-balance="{{ total_balance }}"></div>
        </div>

        <div class="accounts-section">
            <h2>Your Accounts</h2>
            <div class="account-list">
                {% if accounts %}
                {% for account in accounts %}
                <div class="account-item">
                    <div class="account-name">{{ account.icon }} {{ account.name }}</div>
                    <div class="account-balance" data-raw-balance="{{ account.balance }}"></div>
                </div>
                {% endfor %}
                {% else %}
                <div class="no-accounts">No accounts found. Create your first account to get started!</div>
                {% endif %}
            </div>
        </div>
    </div>

    <script>
        function formatCurrency(amount) {
            return new Intl.NumberFormat('en-US', {
                style: 'currency',
                currency: 'USD'
            }).format(amount);
        }

        document.addEventListener('DOMContentLoaded', function () {
            // Format total balance
            const totalBalanceEl = document.querySelector('.amount');
            if (totalBalanceEl) {
                const rawTotal = parseFloat(totalBalanceEl.dataset.rawBalance);
                totalBalanceEl.textContent = formatCurrency(rawTotal);
            }

            // Format all account balances
            document.querySelectorAll('.account-balance').forEach(el => {
                const rawBalance = parseFloat(el.dataset.rawBalance);
                el.textContent = formatCurrency(rawBalance);
            });
        });
    </script>
</body>

</html>
{% endblock %}